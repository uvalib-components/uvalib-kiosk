<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../core-scaffold/core-scaffold.html">
<link rel="import" href="../core-header-panel/core-header-panel.html">
<link rel="import" href="../core-toolbar/core-toolbar.html">
<link rel="import" href="../uvalib-stacks-direct/uvalib-stacks-direct.html">
<link rel="import" href="../uvalib-catalog/uvalib-catalog.html">
<link rel="import" href="../uvalib-floorplan-alderman/uvalib-floorplan-alderman.html">
<link rel="import" href="../core-selector/core-selector.html">
<link rel="import" href="../juicy-html/juicy-html.html">
<link rel="import" href="../core-animated-pages/core-animated-pages.html">
<link rel="import" href="../paper-button/paper-button.html">

<!--
Element providing a kiosk app for the alderman library to help find books in the stacks.

##### Example

    <uvalib-kiosk></uvalib-kiosk>

@element uvalib-kiosk
@blurb Element providing a kiosk app for the alderman library.
@status alpha
@homepage http://uvalib-components.github.io/uvalib-kiosk
-->
<polymer-element name="uvalib-kiosk" attributes="notitle author">

  <template>

    <script type="text/javascript" src="//use.typekit.net/txp7zqw.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <link rel="stylesheet" href="uvalib-kiosk.css" />

    <uvalib-catalog id="api" advanced titleQuery={{query}} items={{items}} inclusiveFacetsJSON='{{includeFacets}}'></uvalib-catalog>

    <uvalib-stacks-direct callnumber="{{callnum}}" desttitle="{{desttitle}}" floor="{{selectedFloor}}" area="{{area}}" direct="{{direct}}"></uvalib-stacks-direct>

    <core-scaffold id="core_scaffold">
          <core-header-panel mode="seamed" id="core_header_panel" navigation flex>
            <core-toolbar id="core_toolbar"></core-toolbar>
            <section id="section" layout vertical>
              <section id="section1" flex relative>
                <core-animated-pages id="searchDirectBox" selected="0">
                  <section id="searchpage">            
                    <paper-input label="Callnumber" floatinglabel value="{{callnum}}"></paper-input><br>
                    <paper-input label="Catalog Search" value={{query}}></paper-input>
                    <core-selector class="list" selected="{{selected}}">
                      <template repeat="{{item in items}}">
                        <div>
                          <strong>{{item['title_display'][0]}}</strong><br />
                          Format: {{item['format_facet'][0]}}<br />
                          Call Number: {{item['call_number_display'][0]}}
                        </div>
                      </template>
                    </core-selector>
                  </section>
                  <section id="directionspage">
                    <paper-button icon="arrow-back"></paper-button><br />
                    {{selectedFloor}}<br />
                    {{area}}<br />
                    <template is="juicy-html" bind="" content="{{direct}}"></template>        
                    }
                  </section>
                </core-animated-pages>
              </section>
            </section>
          </core-header-panel>
          <div id="div" class="logo" tool>University of Virginia Library</div>
          <div id="main">

          <uvalib-floorplan-alderman id="focusFloors" selectedDest="{{desttitle}}" selectedFloor="{{selectedFloor}}" skewed?="{{skewed}}" deskewText?="{{deskewtext}}" stacked?={{stacked}}></uvalib-floorplan-alderman>

          <uvalib-floorpicker-alderman vertical selectedFloor="{{selectedFloor}}"></uvalib-floorpicker-alderman>

        </div>
      </core-scaffold>

  </template>

  <script>

    Polymer('uvalib-kiosk', {
      selectedFloor: 4,
      includeFacets: '{"library_facet":["Alderman"],"format_facet":["Book", "Broadside", "Journal Magazine", "Large Print", "Manuscript", "Map", "Microform", "Mixed Materials", "Newspaper", "Other Media", "Photographs", "Physical Object", "Print", "Thesis%2FDissertation"]}',

      selectedChanged: function(oldVal, newVal){
        this.$.searchDirectBox.selected = 1;
        //this.selectedLocation = this.getLocation(this.items[newVal]);
        this.callnum = this.items[newVal]["call_number_display"][0];
        //this.selectedNormalizedCallNumber = this.items[newVal]["normalizedCallNum"];
      },
      

      ready: function() {
        // Ready is a lifecycle callback.
        // You can do setup work in here.
        // More info: http://www.polymer-project.org/docs/polymer/polymer.html#lifecyclemethods
      }

    });

  </script>

</polymer-element>
